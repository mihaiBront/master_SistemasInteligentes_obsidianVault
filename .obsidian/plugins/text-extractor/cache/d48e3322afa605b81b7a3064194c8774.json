{"path":"_aula_virtual/SJK002/SJK002-U9-1-3D-Stereo-Vision.pdf","text":"U9.1. StereoVisionSJK002 Computer VisionMaster in Intelligent Systems2U9.1. Stereo VisionIndexIntroduction•What is stereo vision?Geometry of a binocular system•Projection geometry•Binocular geometry. Fundamental matrix•Rectification3U9.1. Stereo VisionIndexIntroduction•What is stereo vision?Geometry of a binocular system•Projection geometry•Binocular geometry. Fundamental matrix•Rectification4U9.1. Stereo VisionProjection of a scene (3D) in 2 o or more planes (2D)•Binocular system•Moving camera•System of a camera with mirrors•System of multiple camerasIntroduction5U9.1. Stereo VisionBinocular systemIntroductionhttp://users.rcn.com/mclaughl.dnai/products.htmhttp://www.lucs.lu.se/Projects/Robots/Robots1990/StereoHead2.html6U9.1. Stereo VisionMoving cameraIntroductionhttp://www.dis.uniroma1.it/~iocchi/stereo/stereo.html7U9.1. Stereo VisionSystem of a camer with mirrorsIntroductionhttp://www-sop.inria.fr/robotvis/hardware/HardwarePictures.html8U9.1. Stereo VisionSystem of multiple camerasIntroductionhttp://www.ptgrey.com/products/digiclops9U9.1. Stereo VisionIndexIntroduction•What is stereo vision?Geometry of a binocular system•Projection geometry•Binocular geometry. Fundamental matrix•Rectification10U9.1. Stereo VisionStereo vision:•2 or more 2D images 3D informationWhatisstereovision?http://www.ai.sri.com/~konolige/svs/pictures.htm11U9.1. Stereo VisionStereo vision:•2 or more 2D images 3D informationWhatisstereovision?http://www.inria.fr/12U9.1. Stereo VisionIndexIntroduction•What is stereo vision?Geometry of a binocular system•Projection geometry•Binocular geometry. Fundamental matrix•Rectification13U9.1. Stereo VisionPinhole camera modelProjection geometrypinholeFocal planeRetinal planePerspective projectionOptical axisOptical centre14U9.1. Stereo VisionPinhole camera modelProjection geometryCRMmm= intersection of line CMwith plane R15U9.1. Stereo VisionCoordinate systemsProjection geometryRCxyzuv2D Coord. Sys. = (c, u, v)uparallel to xvparallel to yc= intersection Rand zc3D Coord. Sys. = (C, x, y, z)C= optical centrez= optical axis16U9.1. Stereo VisionFrom camera to image coordinatesProjection geometryRCxyzuvcM=(x,y,z)m=(u,v)yvxuzf17U9.1. Stereo VisionPerspective projection matrixProjection geometry10001000000zyxffSVUyvxuzf0//SsiSVvSUuMPm~~P= projection matrix2D3D2D3DScale factorS=zHomogeneous coordinates18U9.1. Stereo VisionThe objective is to represent min normalized coordinatesProjection geometryRM=(x,y,z)m=(u,v)CfCxyuvc19U9.1. Stereo VisionFrom image coordinates to normalized coordinates (origin and pixel units)Projection geometryRmuvcunvncnNormalized image coordinatescmccmcnnCoordinates changede (c, u, v) a (cn, un, vn)Add cposition to mwith respect to cn:(u0, v0) 20U9.1. Stereo VisionFrom image coordinates to normalized coordinatesProjection geometryUnits of u, vmetersUnits of un, vnpixelsku, kvpixels/meterIn general kukvRmuvcunvncnNormalized image coordinates21U9.1. Stereo VisionFrom image coordinates to normalized coordinatesProjection geometry110000100vuvkukvuvunnRmuvcunvncnNormalized image coordinatesChange of coordinates origin22U9.1. Stereo VisionPerspective projection matrixProjection geometry000000100101nunvxuUfkuySvVfkvzSIntrinsic parameters:f, ku, kv, u0, v00//SsiSVvSUunn23U9.1. Stereo VisionPerspective projection matrixProjection geometry0//SsiSVvSUunn000000100101nunvxuUuySvVvzSFocal length in units of unand vn: u, v24U9.1. Stereo VisionPerspective projection matrixProjection geometry00cot00/sin0100101nuunvxuUuySvVvzSWhen there is a posible deviation of the optical axis0//SsiSVvSUunn11 degrees of freedom25U9.1. Stereo VisionExtrinsic parameters:•from the world coordinates to camera coordinatesProjection geometryRM=(x,y,z)m=(u,v)CfCxyuvczZYXORotation + TraslationoMKM~~M0=(X,Y,Z)26U9.1. Stereo VisionExtrinsic parametersProjection geometryRotation + TraslationoMKM~~1000333231232221131211zyxtrrrtrrrtrrrKRotation + Traslation27U9.1. Stereo VisionGeneral form of the projection matrixProjection geometry0//SsiSVvSUunn11nnXuUYSvVPZS28U9.1. Stereo VisionGeneral form of the projection matrixProjection geometry10000001000033323123222113121100zyxvutrrrtrrrtrrrvfkufkP3x4 matrixIntrinsic parametersExtrinsic parameters29U9.1. Stereo VisionCalibration:•Step 1: Estimate matrix P•Step 2: Estimate intrinsic and extrinsic parametersfrom PFor some applications (e.g. stereo vision) it is only necessary step 1.Projection geometry30Projection geometryCamera calibration•Linear regression (least squares).•Non linear optimization.•Multiple planar patterns.U9.1. Stereo Vision31MXXtRKx~Calibration: Linear regressionIntrinsic parametersProjection matrixExtrinsic parameters3D pointImage projection of the 3D pointU9.1. Stereo Vision32Linear regressionDirectlyestimatethe11 unknownvaluesofmatrixM.Use a set ofknown3D points(Xi,Yi,Zi)and measuretheimageposition ofthecorrespondingprojectedpoints(ui,vi)U9.1. Stereo Vision33Solve for the projection matrix M using least squaresLinear regressionEach point defines two equationsU9.1. Stereo Vision34Linear regressionLeast squares:•p/2 points of the calibration grid (patterns)•n=11 unknown values of matrix MU9.1. Stereo Vision00010000101111010122...........................nnpppnnaaabmaaabmaaabmAm=bIndependent terms vectorEach row corresponds to the coefficients of one equation35Linear regressionLeast squaresU9.1. Stereo Visionttt-1tAm=bAAm=Abm=(AA)AbLinear system with m equations and n unknownsNormal equation which minimizes the sum of squared differencesSolution vector m of n values to be estimated36Linear regressionAdvantages:•All camera parameters summarized in a single matrix.•Can predict how any 3D point is projected into the image plane.Disadvantages:•Does not provide specific information for each of the camera parameters.•Mixture of intrinsic and extrinsic parameters:Dependent on camera position.If camera moves, the estimated projection camera is not the same one.U9.1. Stereo Vision37U9.1. Stereo VisionIndexIntroduction•What is stereo vision?Geometry of a binocular system•Projection geometry•Binocular geometry. Fundamental matrix•Rectification38U9.1. Stereo VisionGeometry of 2 cameras:•Parallel geometry•Non-parallel geometryBinocular systemgeometryP1P239U9.1. Stereo VisionThe simplest case:•Parallel geometryBinocular systemgeometryP1P2b40U9.1. Stereo VisionThe simplest case:•Parallel geometryBinocular systemgeometry00010000001vfkufkPvu10000100001000100010000002bvfkufkPvuChange to the camera 1 coordinates system41U9.1. Stereo VisionThe simplest case:•Parallel geometryBinocular systemgeometry00010000001vfkufkPvu0010000002bfkvfkufkPuvuThey are the same!42U9.1. Stereo VisionThe simplest case:•Parallel geometryBinocular systemgeometry11111,~~vumMPm22222,~~vumMPm21vv43U9.1. Stereo VisionThe simplest case:•Parallel geometryBinocular systemgeometry01uzxfkuuzbfkuuu12zbfkuzxfkuuu0244U9.1. Stereo VisionThe simplest case:•Parallel geometryBinocular systemgeometryzbfkuuu12zbfkuuu12constantdisparitydepthInversely proportional45U9.1. Stereo VisionThe simplest case:•Parallel geometryBinocular systemgeometry46U9.1. Stereo VisionThe simplest case:•Parallel geometryBinocular systemgeometryu1u2Disparityu2 -u1Search for homologouspoints:Thecorrespondenceproblem47U9.1. Stereo VisionThe simplest case:•Parallel geometryBinocular systemgeometryEpipolar linesPlane bundleC1C248U9.1. Stereo VisionNon-parallel geometryBinocular systemgeometryEpipolesC1C249U9.1. Stereo VisionNon-parallel geometryBinocular systemgeometry00010000001vfkufkPvu100000010000333231232221131211002zyxvutrrrtrrrtrrrvfkufkPAssuming: •World coordinates in (C1, x1, y1, z1) •Both cameras are equal50U9.1. Stereo VisionFundamental matrixBinocular systemgeometrym1m2?21~lmFl2l1F= Fundamental matrix12~lmFTTFF10~~12mFmT0~~21mFmTTl1l2Matriz 3x3Homogeneous coordinatesl=(a,b,c)51U9.1. Stereo VisionCalibration:•Obtain all calibration parameters (projection matrices P1y P2)s1, s2: scale factors•Calculate Ffrom P1y P2where Qiare 3x3 matrices and qiare 3x1 vectors,Binocular systemgeometryMPms~~111MPms~~22211211122QQqQQqF][iiiqQP3x3 matrix3x1 matrixFactorization52U9.1. Stereo VisionWeakcalibration:•Find pairs of homologous points in both images•Estimate Fmatrix from pairs of corresponding pointsMethod of 8-pointsLinear methodsNon-linear methodsBinocular systemgeometry53U9.1. Stereo VisionIndexIntroduction•What is stereo vision?Geometry of a binocular system•Projection geometry•Binocular geometry. Fundamental matrix•Rectification54U9.1. Stereo VisionRectification:•Make coincide epipolar lines with image rowsBinocular systemgeometry55U9.1. Stereo VisionRectification:•If the cameras have linear perspectiveRectify = project P1and P2in a rectification plane•If they have non-linear perspectiveMust take into account distortion•If they do not have perspective projectionVery different methodsBinocular systemgeometry56U9.1. Stereo VisionRectification:•If the cameras have linear perspectiveRectify = project P1and P2in a rectification planeEpipoles are sent to infinitRectified Fis:Binocular systemgeometry010100000F57U9.1. Stereo VisionBinocular systemgeometryRectification:12112122212211201100101FmluaFvblvclmuvvvvvv010100000F58U9.1. Stereo VisionRectification:Binocular systemgeometry59U9.1. Stereo VisionRectification:Binocular systemgeometry60U9.1. Stereo VisionRectification:Binocular systemgeometry61U9.1. Stereo VisionRectification: comparison between linear and non-linear methodBinocular systemgeometry62U9.1. Stereo VisionReferencesBasic:•Forsyth, D.A. and Ponce, J.; Computer Vision: A Modern Approach, Prentice Hall, 2003.Complementary:•Jähne, B. Practical Handbook on Image Processing for Scientific Applications, CRC Press, 1997.•Jain, R.; Kasturi, R.; and Schunck, B.G.; Machine Vision, McGraw-Hill Inc., 1995.•Shapiro, L. and Stockman, G.; Computer Vision, Prentice Hall, 2000.63U9.1. Stereo VisionReferencesGeometry of computer vision systems:•Faugeras, O.; Three-Dimensional Computer Vision. A Geometric Approach. MIT Press, 1993•Hartley, R. and Zisserman, A.; Multiple View Geometry in Computer Vision, Cambridge University Press, 2000","libVersion":"0.3.2","langs":""}