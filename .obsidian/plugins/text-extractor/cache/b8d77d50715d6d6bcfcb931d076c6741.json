{"path":"_aula_virtual/SJK004/Unit 5 Reaching agreements.pdf","text":"Unit 5: Reaching agreements Based on “An Introduction to MultiAgent Systems”, M. Wooldridge “Multiagent Systems” (chap. 5) G. Weiss “Fundamentals of Multiagent Systems” J.M. Vidal Reaching agreements ■ How to reach agreements when agents are self-interested? ■ In the worst scenario (zero-sum encounter) there is not place for an agreement. But, in a vast majority of scenarios there is an opportunity to reach an agreement mutually good for many particular issues. ■ Negotiation and argumentation are core competencies for agents to reach agreements. Mechanisms, Protocols, and Strategies ■ The negotiation process is driven by a protocol , also called mechanism, that defines the interaction rules among the agents. ■ Mechanism design is a mathematical field that design protocols showing certain desirable properties. For example, incentivizing agents to participate in the protocol. Mechanism Design ■ Convergence/Successful agreement. ■ Social welfare: maximizing the cumulative addition of utilities for all the agents involved. ■ Pareto efficiency : x is P.E. if there is not a x’ such that x’ is best that x for an agent and for the rest of agents x’ is greater or equal than x (in other words; P.E: implies that there is not possible to give an agent a better profit without give some other agents a worst profit) ■ Individual Rationality . ■ Stability: ❑ Dominant Strategie : i chooses strategie s i if it is the best for him independently of the strategies played by other agents. ❑ Nash equilibrium: s A * = (s 1*,…,sn*) is in N.e. if ∀i, si* is the best strategy given that the rest of agents use the strategies s A-i * = (s 1*,… si-1*,si+1*,..,sn*). ■ Computational efficiency : The execution cost of the protocol is low, there are more available time for deciding which strategy to use. ■ Distribution. Criteria or desirable properties: Example: Prisoner's dilemma (CC) is social welfare. Which are pareto efficiency? (D,D) is dominant strategy and N.E. Why? i defect coop j defect 2,2 4,1 coop 1,4 3,3 Question: Let's assume that two persons has to split a given amount of money. Which solutions will be pareto efficiency? Voting ■ Maximize Social Welfare: all agents provide a vote based on their preferences to a mechanism (which serves as both the ballot box and the ballot count), and the result is the agreed-upon solution for all agents. ■ This is not an easy problem to solve as it can seems. Moreover, agents can not to be truthful when they send their votes … ■ Let’s show first the scenario where agents are truthful. Voting: Truthful agents ■ Each agent has preferences about what it is voting. So, it set a transitive and anti-symmetric order ≻i among these preferences (O). Then, it send a vote (according to that order) to the mechanism. The mechanism receive all votes and calculate the overall solution ≻*, called the social preference relationship . ■ How ≻* has to be for the overall procedure to be considered “fair”? ❑ ≻* must exists for all the preferences of the agents ❑ ≻* must be defined for each pair o,o’ from O ❑ ≻* must be antisymmetric and transitive in O ❑ ≻* must be pareto efficient: if o ≻ io’ then o ≻ *o’ ❑ ≻* must be independent of irrelevant alternatives. ❑ ≻* neither agent can be a dictator. Voting: Truthful agents ❑ Is it possible to design ≻*? Arrow’s impossibility theorem Neither mechanism can be design to fulfill all previous exposed 6 conditions ❑ Therefore, any of these conditions must be relaxed. ❑ Let’s see some popular voting protocols: Voting: Truthful agents ❑ Binary protocol : preferences are voted by pairs ■ Problem: irrelevant alternatives and the order in which pairs are compared might change the final outcome ■ Example: ❑ 35% agents C ≻ D ≻ B ≻ A ❑ 33% agents A ≻ C ≻ D ≻ B ❑ 32% agents B ≻ A ≻ C ≻ D (C,A) → (A,B) → (B,D) → D wins, but observe that all agents prefer C to D (D,B) → (D,A) → (A,C) → A wins (C,A) → (D,A) → (A,B) → B wins (A,B) → (B,C) → (C,D) → C wins Condorcet paradox ■ There are scenarios that the winner outcome always have a majority of other preference better that the winner.. Example: Who wins A, B or C? A ≻ B ≻ C B ≻ C ≻ A C ≻ A ≻ B Voting: Truthful agentsVoting: Truthful agents ■ Borda protocol : give points to each preference by its position in the order of preferences. ❑ Problem: the outcome can change by introducing irrelevant alternatives. ■ Example: Agent 1: A ≻ B ≻ C Agent 2: B ≻ C ≻ A Agent 3: C ≻ A ≻ B Agent 4: A ≻ B ≻ C Agent 5: B ≻ C ≻ A Agent 6: C ≻ A ≻ B Agent 7: A ≻ B ≻ C Agent 1: A ≻ B ≻ C ≻ D Agent 2: B ≻ C ≻ D ≻ A Agent 3: C ≻ D ≻ A ≻ B Agent 4: A ≻ B ≻ C ≻ D Agent 5: B ≻ C ≻ D ≻ A Agent 6: C ≻ D ≻ A ≻ B Agent 7: A ≻ B ≻ C ≻ D Wins A =15 (B=14, C=13) Wins C =20! (B=19, A=18, D=13) Voting: Untruthful agents ■ Example 1: Vote among neighbours if we have to paint the front of a building. ❑ If the cost to paint it is splitted among all the neighbours. Is it fair for the neighbours that do not want to paint it to paid too? ❑ If the cost for painting is splitted among all the neighbours that want to paint it, and one neighbour i , who wants to be painted, knows that there is a majority of neighbours that want to paint it, what should agent i vote (acting as a self-interested one)? ■ If a rational agent can get benefit sending an untruthful vote, it will do it. Voting: Untruthful agents ■ How to deal with these situations? Introducing incentives in the protocol to make agents act in a truthful way: Mechanism Design ■ Formally: ❑ A mechanism design problem has a set of involved agents with the following properties: ■ Each agent i has a private type θi∈ Θ ■ Mechanism g: S1 x S2 x .. x SA → O ■ Each agent i gets a value vi(o, θi) ■ A Social election function describes the outcome that the mechanism wants to be reached f: Θ → O Voting: Untruthful agents ■ Remember the Example 1 noted as a mechanism design problem: ❑ Θ = {Want, NotWant} ❑ O = {Paint, NotPaint} ❑ vi(Paint, Want) = 10 ٨ vi(NotPaint, Want) = 0 given θi = Want ❑ vi(paint, NotWant) = 0 ٨ vi(NotPaint, NotWant) = 0 given θi = NotWant ❑ Cost of paint the front of the building = 20 ❑ f(Θ) = argmax o∈OΣi=1,nvi(o, θi) Max. Social Welfare. ❑ How to calculate g? Voting: Untruthful agents ■ It is said that g implements f if there exists an strategy in equilibrium (s 1*(.),..,s A *(.)) induced by g such that ∀ θ g(s 1*(θ1), .. ,s A *(θA)) = f(θ1 , .. , θA) ■ It is said that an strategy (s 1*(.),..,s A *(.)) induced by g is a dominant strategy equilibrium if ∀ i, θi v i(g(s i*(θi),s -i), θi) ≥ v i(g(s’ i, s-i), θi) ∀s’ i ∈ Si ∀s -i ∈ S-i ■ Revealing direct mechanism : when sending a vote a type is shown (truthfull or untruthful) ■ Revelation principle theorem : Let a protocol that implements f(.) in a Nash equilibrium de Nash or a dominant strategy equilibrium in which the strategies of the agents do not need to be truthful. Then, f(.) can be implemented in N.E. of D.S.E. by a single step protocol in which the agents has to reveal their truthful preferences. Voting: Untruthful agents ■ How to calculate the payoffs? If f(.) tries to reach social welfare and the utilities of the agents are quasi-linear (u i(o, θ i) =v i(o, θ i) + p i(o)) the Groves-Clarke Mechanism can be applied: ❑ If the social election function tries to reach social welfare, f(Θ) = argmax o∈OΣi=1,nvi(o, θi) ❑ Then, calculating the outcome as f(Θ~) = argmax o∈OΣi=1,nvi(o, θi~) ❑ And providing the payoffs for all the agents by pi(θ ~) = Σ i≠jvj(f(θ~), θj~) – h i(θ-i ~) ❑ The mechanism is proof strategy one (i.e. it is better for any agent to vote truthfully than lying). ■ The general idea is to put an additional tax to those agents whose vote reduce the utility of the rest of the agents. Voting: Untruthful agents ■ Visiting again Example 1 (using the Groves-Clarke mechanism) Nombre v i(o, θ~) v i(o, θ) + Σj≠iv j(θ~) Agent 1 10-20/4=5 5+15=20 Agent 2 0-0=0 0+20=20 Agent 3 10-20/4=5 5+15=20 Agent 4 10-20/4=5 5+15=20 Agent 5 10-20/4=5 5+15=20 Nombre v i(o, θ~) v i(o, θ) + Σj≠iv j(θ~) Agent 1 0-0=0 10+(10/3*3)=20 Agent 2 0-0=0 0+(10/3*3)=10 Agent 3 10-20/3=10/3 10/3+(10/3*2)=10 Agent 4 10-20/3=10/3 10/3+(10/3*2)=10 Agent 5 10-20/3=10/3 10/3+(10/3*2)=10 Truthful Agents Agent 1 lies Payoffs accumulation = 100 Payoffs accumulation = 60 Voting: Untruthful agents ■ Conclusions: ❑ Under very restrictive assumptions it is possible to find out the g mechanism ❑ Problem: Who provides the payoffs? The problem for guarantee a zero yield is open. ❑ Problem: What if some agents form a coalition? ❑ Another Protocol: Hat protocol: Choose randomly an agent a make his preferences as f(.): ❑ Advantages: The best strategy is to be truthful. ❑ Disadvantages: The chosen agent acts as a dictator. Auctions ■ An auction has an auctioneer and bidders ■ The goal of an auction is to assign an item to winner bidder ■ It is very common that the auctioneer wants to maximize the price whilst the bidders want to minimize it. Auction parameters ■ The items for auctioning can have a: ❑ Private value ❑ Public value ❑ Correlated value ■ The winner can be: ❑ Best price ❑ Second best price ■ The offers can be: ❑ open ❑ Closed envelope ■ The process to bid can be: ❑ unique ❑ ascending ❑ descending English auction ■ It is the more common type of auction: ❑ greater price wins ❑ open ❑ ascending ■ The dominant strategy is to bid a little more the the current bid up to reach it estimated value for the item and then withdraw from the auction if that value is surpassed. ■ May be susceptible of ❑ the winner complex (Maybe I am wrong about the “real” value of the item) Dutch auction ■ It is a descending open one: ❑ The auctioneer starts at a highly price. ❑ The auctioneer goes continuously lowering the price. ❑ The item is set to the bidder that first accept the current price.. Close envelope best offer ■ These are auctions with just one offer: ❑ There is just one round. ❑ The bidders send their offer in a close envelope. ❑ The item is set to the best received offer to the bidder that sent it ■ The best strategy for each bidder is to send an offer slightly lower for the item than his real value Vickrey auctions ■ They are: ❑ Second best price. ❑ Close envelope. ■ The item is set to the bidder that sent the best offer, but the price to pay is the second best one. ■ There is a dominant strategy: send the real value for each bidder ■ Antisocial behaviours can emerge when people are the bidders. Efficiency in the clearance of the auction ■ public or private value : the four types of auctions set the item in P.E. to the bidder that send the highest bid (Vickrey and English have D.S.) ■ Which can be the maximum profit for the auctioneer? ■ Equivalent Auctioneer profit Theorem ❑ These four types of actions get the same expected profit for the auctioneer if the values are private and are independent distributed, and bidders are risk neutral ones. ■ If the bidders are risk averse ones then the best auctions are the dutch and best bid close envelope. ■ If the auctioneer is a risk seeking one then the best auctions are English or Vickrey. Lying and hidden coalitions ■ All these auctions can be manipulated by lies from the auctioneer and by secret coalitions among bidders. ■ A dishonest auctioneer can manipulate the Vickrey auction by lying on the second best price received. ■ Ghost offers can be bid to gets the price higher in english auctions. Private information revealed ■ What if the winner bidder wants to auction any parts of the winned item but it is public how much this bidder had paid for the whole item? ■ With Vickrey this is a problem: It won paying a lower price than the one sent, so the rest of bidders can take advantage of this information … Auctioning interrelated multiple items ■ Example: Goods transport: The goal is to move an item from the beginning of the arrow to the end of the arrow. The profit for the bidders is reduced as the cost increments. 0.5 0.5 1.0 t1 t2 Ag1 Ag2 C1(t1) = 2 C1(t2) = 1 C1({t1,t2}) = 2 C2(t1) = 1.5 C2(t2) = 1.5 C2({t1,t2}) = 2.5 ■ The best solution is that Ag1 make both tasks ■ But, this do not happen if they are auctioned sequentially: ■ t1 is set to Ag2 y t 2 is set to Ag1. The total cost is 2.5 Auctioning interrelated multiple items ■ But if Ag2 suppose that it just have assigned the t1 task, then it can bid: ■ c2({t1,t2}) – c2({t1}) = 2.5 – 1.5 = 1 ■ Therefore, t2 could be assigned to whatever of the bidders. ■ But,, What if bidders could anticipate what will happen if they are set to a task before the task is cleared? ❑ Then, the best solution can be reached (Ag1 makes both task but it must not to be true in its bids) Double auctions ■ Each bidder set a sell or buy order for a number of instances of an item for a given price. ■ Wait until all offers from buyers are received. ■ Clearance of the double auction. How? ❑ Several options: ■ Maximize the excess: max Σ i,k(buy i,k – selli,k) Who gets this excess? ■ Maximize the number of cleared offers. ■ Set an uniform price for the clearance (just the purchases above this price and the sales below this price will be cleared). Price Buy Sell Combinatorial auctions ■ A combinatorial auction over a set M of items is composed of a set of offers in which each bidder can put several offers for several subsets of items. ■ A1 – 100 – (HDD,PS) ■ A1 – 90 – (PS,Mem) ■ A2 – 120 – (HDD,Intel IV,Mem) ■ A2 – 55 – (HDD) ■ A2 – 118 – (HDD,Box) ■ A3 – 100 – (HDD,Intel V) ■ A3 – 85 – (Intel V) ■ A3 – 120 – (HDD,Box) ■ A4 – 55 – (Cooling) ■ A5 – 211 – (HDD,Box,Cooling,Intel IV) ■ What offers are cleared? How to resolve which ones? Combinatorial auction: Centralized solution ■ Structure of each bid b ∈ B: b = (bagent, bvalue, bitems) ■ Goal: Calculate X* = arg maxX⊆CΣb∈X bvalue such that C = {Y⊆ B / ∀ a,b∈Y aitems∩ bitems = ∅} Problem: Calculate X* by brute force has a cost of O(m m), ω(m m/2). Theorem: To calculate the winner in a combinatorial auction is NP-hard. Combinatorial auction: Centralized solution ❑ Some constraints must be set: ❑ If each item has at least an individual offer, then this problem can be approached as linear programming problem : Maximize Σb∈Bx[b]bvalue Subject to Σb|j∈bitems x[b] ≤ 1, ∀j ∈M with x[b] ∈{0,1}, ∀b ∈B and such that x[b] is the bit denoting if offer b is the winner one. ❑ Put the offers in a search tree where each node represents an offer and each path represents a collection of offers without shared items: ❑ Branch and bound for the items (CASS, 1999). ❑ Branch and bound for the offers (CABOB,2005). Bargainings (Negotiation) ■ Auctions are important, but they are usually useful for the location of mercancies: more advanced techniques are required to reach agreements. ■ Negotiation is the process for reaching agreements about several goods attending individual agent goals. ■ Whatever negotiation framework has four components: ❑ The negotiation set: the offers that agent can propose. ❑ A protocol. ❑ The strategies, one for each agent, are private. ❑ A formula that states when an agreement has been reached and which is that agreement. ■ Usually the negotiation runs in rounds. An agent can give an offer in a round. Axiomatic solution concepts ■ Several requirements can be stated: ❑ Pareto optimal (PO): An offer δ is pareto optimal if there is not a best offer for at least one of the agents that it is not worse for the rest of agents. ❑ Utility Unit independency (IUU): The utilities that agents receive for each offer are proportional under multiplication. ❑ Symmetry (S): There is not important which agents gets which utility. ❑ Individual rationality (IR): An offer δ if this is better that do not success in the agreement. ❑ Irrelevant alternatives independency (IAI). Axiomatic solutions ■ Egalitarian solution : the best offer in which the profit is splitted equally among all agents (no PO neither IUU): δ = argmax δ∈E Σ ui(δ’) / E = { δ / ∀ i,j ui(δ) = uj(δ)} ■ Social egalitarian solution : The offer that maximizes the received utility of the agent with the lower utility (not IUU): δ = arg max δmin i ui(δ) ■ Utility solution : the offer that maximizes the sum of the utilities (PO but not IUU): δ = argmax Σ i ui(δ’) ■ Nash Bargaining solution : the best offer is the one that maximizes the product of the utilities (PO, IUU, IAI, S): δ = argmax δ Π i ui(δ’) ■ Kalai-Smorodinsky solution : the offer is the one that distributes the utility proportionally to each agent maximum (IUU, not IAI). ■ Which one is the best solution? It depends on the context The negotiation setNegotiation protocols ■ Agents use a negotiation protocol of maximum profit (as in the Nash bargaining theory). ■ It should be symmetric (the same for all agents). ■ Examples: One-step protocol, Monotonic concession protocol … Strategic solution concepts ■ Protocols are usually based on the Rubinstein alternating offers : ■ Protocol goes in rounds. ■ In each round, an agent calculates and propose an offer to the other agents. ■ The other agent receives the offer and evaluates it: if it is accepted the bargaining ends; in other case it calculates a counteroffer and sends it the the other agent that it will analyze it in the next round.. ■ Past offers can not be accepted later. Strategic solution concepts ■ Time depending utilities: time influences the utility about a bargaining item (e.g. an ice cream): uit(δ) = λ itui0(δ) ■ Theorem: The Rubinstein alternating offers in which agents has complementary linear utilities (ui(δ) = δ and u j(δ) = 1 – δ) has a sub perfect game equilibrium strategy that is: Agent i propose the offer δi* = (1 – λ j) / (1 – λ iλj) and it accepts the offer δj just if ui(δ j) ≤ u j(δ i*) Agent j propose the offer δj* = (1 – λ i) / (1 – λ iλj) and it accepts the offer δi just if uj(δ j) ≤ u j(δ i*) The Monotonic concession protocol Features: ■ Bargaining goes in rounds. ■ In the first round, each agent propose an offer from the negotiation set. ■ An agreement is reached if the agent detects that the offer from another agent is at least as good (or best) than yours. ■ If an agreement is not reached, then a new round starts. ■ Neither agent can send an offer that can be less preferable to the other agent that one sent in a previous round. ■ If neither agent concedes, negotiation ends with the conflict proposal (usually not good for either agent). The Zeuthen strategy Three problems: ■ Which will be the first offer for each agent? Its own preferable one. ■ Who should concede in each round? The agent that more desires to avoid the conflict solution. ■ How much it should concede? Just the quantity to avoid the conflict. Closing the conflict ■ Let suppose that an agent has concede a lot. Then: ❑ Its offer is close to the conflict solution. ❑ If conflict happens then, this is not as bad as it was at the beginning. ❑ It almost waits for the conflict to appear. ■ An agent is waiting for the conflict if the difference in utilities between the current offer and the conflict solution is low. Again Nash equilibrium… ■ The Zeuthen strategy is in Nash equilibrium: under the assumption that one agent uses it, the other agent cannot do any better than using it as well … ■ This is highly relevant for the design of intelligent agents, as it eliminates the temptation to use secret strategies when designing agents. Each agent's strategy should be publicly known, and this does not result in other agents taking advantage of knowing it. In fact, it is better for them to know it so as to avoid conflicts. Strategic equilibrium concepts ■ There are other important issues to take in account: ■ Temporal Deadlines for the bargaining. ■ Time evolution: discrete and equidistant y equidistante versus continuous and variable. ■ Knowledge about agents: complete versus partial . ■ items in negotiation: one or several. ■ Bargaining several items: ■ Agenda: exogenous versus endogenous. ■ The negotiation order. ■ Implementation type: sequential versus simultaneous. ■ Item relationships: independents versus dependents.","libVersion":"0.3.2","langs":""}